{% import time %}
{% from statsmile import libs %}

<p class="watch-btn"><a class="btn btn-inverse" href="dota2://matchid={{ user['dota-game']['match_id'] }}"><i class="icon-film icon-white"></i> Watch Replay</a></p>

<div class="row-fluid">
    <div class="span6">
        <p class="text-success pull-right"><i class="icon-thumbs-up"></i> {{ user['dota-game']['positive_votes'] }}</p>

    </div>
    <div class="span6">
        <p class="text-error">{{ user['dota-game']['negative_votes'] }} <i class="icon-thumbs-down"></i></p>
    </div>
</div>

<div class="row-fluid info-dota">
    <div class="span4">
        <p><i class="icon-globe"></i><b> Match:</b> {{ user['dota-game']['match_id'] }}</p>
        <p><i class="icon-calendar"></i><b> Data:</b> {{ time.strftime('%d, %B %Y %H:%M:%S', time.localtime(user['dota-game']['start_time'])) }}</p>
        <p><i class="icon-time"></i><b> Duration:</b> {{ time.strftime("%H:%M:%S", time.gmtime(user['dota-game']['duration'])) }}</p>
    </div>
    <div class="span4">
        <p><i class="icon-list-alt"></i><b> Game Mode:</b> {% try %}{{ libs.mode[user['dota-game']['game_mode']]['name'] }}{% except %}{{ user['dota-game']['game_mode'] }}{% end %}</p>
        <p><i class="icon-hdd"></i><b> Server:</b> {% try %}{{ libs.cluster[user['dota-game']['cluster']]['name'] }}{% except %}{{ user['dota-game']['cluster'] }}{% end %}</p>
        <p><i class="icon-time"></i><b> First Blood:</b> {% try %}{{ time.strftime("%M:%S", time.gmtime(user['dota-game']['first_blood_time'])) }}{% except %}None{% end %}</p>
    </div>
</div>

<div class="tabbable">
    <ul class="nav nav-tabs">
        <li class="active"><a href="#radiant" data-toggle="tab">The Radiant</a></li>
        <li><a href="#dire" data-toggle="tab">The Dire</a></li>
        <li class="disabled"><a href="#skill">Skill Builds</a></li>
    </ul>
    <div class="tab-content">
        <!-- The Radiant -->
        <div class="tab-pane active" id="radiant">
            <table class="table table-bordered">
                <thead>
                <tr><th class="text-success">{% if user['dota-game']['radiant_win'] %}Radiant victory!{% else %}The Radiant{% end %}</tr>
                <tr>
                    <th class="muted">Player</th>
                    <th class="muted">Hero</th>
                    <th class="muted" colspan="6">Items</th>
                    <th class="muted">DN</th>
                    <th class="muted">LH</th>
                    <th class="muted">XPM</th>
                    <th class="muted">GPM</th>
                    <th class="muted">KDA</th>
                </tr>
                </thead>
                <tbody>
                {% for dota in user['dota-game']['players'][:5] %}
                <tr>
                    {% if dota['account_id'] == 4294967295 %}<td class="muted">Anonymous</td>{% else %}<td>{{ dota['account_id'] }}{% end %}</td>
                    <td style="width: 80px; padding: 1px;">
                        <div style="position: relative;">
                            <img src="{% try %}{{ static_url(libs.heroes[dota['hero_id']]['avatar']) }}{% except %}data-src=holder.js/80x45/text:{{ dota['hero_id'] }}{% end %}" />
                            <div class="label-hero"><h6>{{ dota['level'] }} Level</h6></div>
                        </div>
                    </td>
                    <td style="width: 60px; padding: 1px;">
                        <img src="{% try %}{{ static_url(libs.items[dota['item_0']]['avatar']) }}{% except %}data-src=holder.js/60x45/text:{{ dota['item_0'] }}{% end %}" />
                    </td>
                    <td style="width: 60px; padding: 1px;">
                        <img src="{% try %}{{ static_url(libs.items[dota['item_1']]['avatar']) }}{% except %}data-src=holder.js/60x45/text:{{ dota['item_1'] }}{% end %}" />
                    </td>
                    <td style="width: 60px; padding: 1px;">
                        <img src="{% try %}{{ static_url(libs.items[dota['item_2']]['avatar']) }}{% except %}data-src=holder.js/60x45/text:{{ dota['item_2'] }}{% end %}" />
                    </td>
                    <td style="width: 60px; padding: 1px;">
                        <img src="{% try %}{{ static_url(libs.items[dota['item_3']]['avatar']) }}{% except %}data-src=holder.js/60x45/text:{{ dota['item_3'] }}{% end %}" />
                    </td>
                    <td style="width: 60px; padding: 1px;">
                        <img src="{% try %}{{ static_url(libs.items[dota['item_4']]['avatar']) }}{% except %}data-src=holder.js/60x45/text:{{ dota['item_4'] }}{% end %}" />
                    </td>
                    <td style="width: 60px; padding: 1px;">
                        <img src="{% try %}{{ static_url(libs.items[dota['item_5']]['avatar']) }}{% except %}data-src=holder.js/60x45/text:{{ dota['item_5'] }}{% end %}" />
                    </td>
                    <td style="width: 40px;">{{ dota['denies'] }}</td>
                    <td style="width: 40px;">{{ dota['last_hits'] }}</td>
                    <td style="width: 40px;">{{ dota['xp_per_min'] }}</td>
                    <td style="width: 40px;">{{ dota['gold_per_min'] }}</td>
                    <td style="width: 200px;">
                        <div class="progress progress-margin">
                            <div class="bar bar-success" style="width: {{ round(dota['kills'] * 100 / float(dota['kills'] + dota['deaths'] + dota['assists']), 3) }}%;">{{ dota['kills'] }}</div>
                            <div class="bar bar-danger" style="width: {{ round(dota['deaths'] * 100 / float(dota['kills'] + dota['deaths'] + dota['assists']), 3) }}%;">{{ dota['deaths'] }}</div>
                            <div class="bar bar-warning" style="width: {{ round(dota['assists'] * 100 / float(dota['kills'] + dota['deaths'] + dota['assists']), 3) }}%;">{{ dota['assists'] }}</div>
                        </div>
                    </td>
                </tr>
                {% end %}
                </tbody>
            </table>
        </div>
        <!-- The Dire -->
        <div class="tab-pane" id="dire">
            <table class="table table-bordered">
                <thead>
                <tr><th class="text-error" colspan="13">{% if not user['dota-game']['radiant_win'] %}Dire victory!{% else %}The Dire{% end %}</th></tr>
                <tr>
                    <th class="muted">Player</th>
                    <th class="muted">Hero</th>
                    <th class="muted" colspan="6">Items</th>
                    <th class="muted">DN</th>
                    <th class="muted">LH</th>
                    <th class="muted">XPM</th>
                    <th class="muted">GPM</th>
                    <th class="muted">KDA</th>
                </tr>
                </thead>
                <tbody>
                {% for dota in user['dota-game']['players'][5:] %}
                <tr>
                    {% if dota['account_id'] == 4294967295 %}<td class="muted">Anonymous</td>{% else %}<td>{{ dota['account_id'] }}{% end %}</td>
                    <td style="width: 80px; padding: 1px;">
                        <div style="position: relative;">
                            <img src="{% try %}{{ static_url(libs.heroes[dota['hero_id']]['avatar']) }}{% except %}data-src=holder.js/80x45/text:{{ dota['hero_id'] }}{% end %}" />
                            <div class="label-hero"><h6>{{ dota['level'] }} Level</h6></div>
                        </div>
                    </td>
                    <td style="width: 60px; padding: 1px;">
                        <img src="{% try %}{{ static_url(libs.items[dota['item_0']]['avatar']) }}{% except %}data-src=holder.js/60x45/text:{{ dota['item_0'] }}{% end %}" />
                    </td>
                    <td style="width: 60px; padding: 1px;">
                        <img src="{% try %}{{ static_url(libs.items[dota['item_1']]['avatar']) }}{% except %}data-src=holder.js/60x45/text:{{ dota['item_1'] }}{% end %}" />
                    </td>
                    <td style="width: 60px; padding: 1px;">
                        <img src="{% try %}{{ static_url(libs.items[dota['item_2']]['avatar']) }}{% except %}data-src=holder.js/60x45/text:{{ dota['item_2'] }}{% end %}" />
                    </td>
                    <td style="width: 60px; padding: 1px;">
                        <img src="{% try %}{{ static_url(libs.items[dota['item_3']]['avatar']) }}{% except %}data-src=holder.js/60x45/text:{{ dota['item_3'] }}{% end %}" />
                    </td>
                    <td style="width: 60px; padding: 1px;">
                        <img src="{% try %}{{ static_url(libs.items[dota['item_4']]['avatar']) }}{% except %}data-src=holder.js/60x45/text:{{ dota['item_4'] }}{% end %}" />
                    </td>
                    <td style="width: 60px; padding: 1px;">
                        <img src="{% try %}{{ static_url(libs.items[dota['item_5']]['avatar']) }}{% except %}data-src=holder.js/60x45/text:{{ dota['item_5'] }}{% end %}" />
                    </td>
                    <td style="width: 40px;">{{ dota['denies'] }}</td>
                    <td style="width: 40px;">{{ dota['last_hits'] }}</td>
                    <td style="width: 40px;">{{ dota['xp_per_min'] }}</td>
                    <td style="width: 40px;">{{ dota['gold_per_min'] }}</td>
                    <td style="width: 200px">
                        <div class="progress progress-margin">
                            <div class="bar bar-success" style="width: {{ round(dota['kills'] * 100 / float(dota['kills'] + dota['deaths'] + dota['assists']), 3) }}%;">{{ dota['kills'] }}</div>
                            <div class="bar bar-danger" style="width: {{ round(dota['deaths'] * 100 / float(dota['kills'] + dota['deaths'] + dota['assists']), 3) }}%;">{{ dota['deaths'] }}</div>
                            <div class="bar bar-warning" style="width: {{ round(dota['assists'] * 100 / float(dota['kills'] + dota['deaths'] + dota['assists']), 3) }}%;">{{ dota['assists'] }}</div>
                        </div>
                    </td>
                </tr>
                {% end %}
                </tbody>
            </table>
        </div>
        <!-- Skills Build -->
        <div class="tab-pane" id="skill">
            <p>Coming Soon...</p>
        </div>
    </div>
</div>




